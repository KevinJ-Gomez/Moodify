<div class="dashboard-layout" [class.light-theme]="!isDarkMode">
  
  <!-- FONDO AMBIENTAL -->
  <div class="ambient-light light-1"></div>
  <div class="ambient-light light-2"></div>

  <!-- BARRA LATERAL (Sidebar) -->
  <aside class="sidebar">
    <div class="brand">
      <svg class="brand-icon" viewBox="0 0 24 24" fill="none" stroke="url(#brand-grad)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <defs>
          <linearGradient id="brand-grad" x1="0" y1="0" x2="100%" y2="0">
            <stop offset="0%" stop-color="#7c3aed" />
            <stop offset="100%" stop-color="#db2777" />
          </linearGradient>
        </defs>
        <path d="M9 18V5l12-2v13"></path>
        <circle cx="6" cy="18" r="3"></circle>
        <circle cx="18" cy="16" r="3"></circle>
      </svg>
      <h1 class="logo-text">Moodify</h1>
    </div>
    
    <nav class="nav-menu">
      <a class="nav-item active">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
        {{ 'DASHBOARD.NAV_HOME' | translate }}
      </a>
      <a class="nav-item">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        {{ 'DASHBOARD.NAV_SEARCH' | translate }}
      </a>
      <a class="nav-item">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
        {{ 'DASHBOARD.NAV_LIBRARY' | translate }}
      </a>
    </nav>

    <!-- NUEVO PIE DE BARRA LATERAL (Perfil Compacto y Elegante) -->
    <div class="sidebar-footer">
      <div class="user-mini-profile">
        <div class="mini-avatar">KG</div>
        <div class="mini-info">
          <span class="mini-name">Kevin</span>
          <span class="mini-status">Premium</span>
        </div>
      </div>
      
      <div class="footer-actions">
        <!-- Botón Configuración (Icono) -->
        <button class="icon-action-btn" (click)="toggleSettings()" [title]="'DASHBOARD.SETTINGS_TITLE' | translate">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        </button>
        <!-- Botón Salir (Icono) -->
        <button class="icon-action-btn logout" (click)="logout()" [title]="'DASHBOARD.BTN_LOGOUT' | translate">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
        </button>
      </div>
    </div>
  </aside>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="main-content">
    
    <header class="top-header">
      <div class="user-welcome">
        <h2>{{ 'DASHBOARD.GREETING' | translate }}</h2>
        <p>{{ 'DASHBOARD.SUBTITLE' | translate }}</p>
      </div>
      
      <div class="header-actions">
        <!-- Botón Ajustes (Móvil) -->
        <button class="btn-icon-only mobile-only" (click)="toggleSettings()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        </button>
        <div class="user-avatar">KG</div>
      </div>
    </header>

    <!-- MENÚ FLOTANTE DE AJUSTES -->
    <div class="settings-modal" *ngIf="isSettingsOpen">
      <div class="settings-header">
        <h3>{{ 'DASHBOARD.SETTINGS_TITLE' | translate }}</h3>
        <button class="close-btn" (click)="toggleSettings()">✕</button>
      </div>
      
      <div class="setting-item">
        <label>{{ 'DASHBOARD.SETTINGS_THEME' | translate }}</label>
        <div class="toggle-switch" (click)="toggleTheme()">
          <span [class.active]="isDarkMode">{{ 'DASHBOARD.SETTINGS_THEME_DARK' | translate }}</span>
          <span [class.active]="!isDarkMode">{{ 'DASHBOARD.SETTINGS_THEME_LIGHT' | translate }}</span>
        </div>
      </div>

      <div class="setting-item">
        <label>{{ 'DASHBOARD.SETTINGS_LANG' | translate }}</label>
        <div class="lang-buttons">
          <button [class.active]="currentLang === 'es'" (click)="setLanguage('es')">ES</button>
          <button [class.active]="currentLang === 'en'" (click)="setLanguage('en')">EN</button>
        </div>
      </div>

      <!-- BOTÓN SALIR EXTRA (Para móvil) -->
      <div class="setting-item mobile-logout">
        <button class="btn-full-logout" (click)="logout()">
          {{ 'DASHBOARD.BTN_LOGOUT' | translate }}
        </button>
      </div>
    </div>

    <!-- SELECTOR DE EMOCIONES -->
    <section class="mood-section">
      <div class="mood-scroller">
        <button 
          class="mood-pill" 
          [class.active]="currentMood === 'all'"
          (click)="setMood('all')">
          {{ 'DASHBOARD.MOOD_ALL' | translate }}
        </button>
        
        <button 
          *ngFor="let mood of moods" 
          class="mood-pill" 
          [class.active]="currentMood === mood.id"
          [style.--mood-color]="mood.color"
          (click)="setMood(mood.id)">
          
          <span class="mood-icon-wrapper" [ngSwitch]="mood.id">
            <svg *ngSwitchCase="'happy'" class="mood-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            <svg *ngSwitchCase="'sad'" class="mood-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path></svg>
            <svg *ngSwitchCase="'relax'" class="mood-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            <svg *ngSwitchCase="'energy'" class="mood-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>
          </span>
          
          {{ mood.label | translate }}
        </button>
      </div>
    </section>

    <!-- RECOMENDADO -->
    <section class="content-section">
      <div class="section-header">
        <h3>{{ 'DASHBOARD.SECTION_FOR_YOU' | translate }}</h3>
        <a href="#" class="see-all">{{ 'DASHBOARD.LINK_SEE_ALL' | translate }}</a>
      </div>

      <div class="songs-grid">
        <div *ngFor="let song of filteredSongs" class="song-card" (click)="playSong(song)">
          <div class="card-image-wrapper">
            <img [src]="song.cover" alt="Cover" loading="lazy">
            <div class="play-btn-overlay">
              <svg class="play-icon" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
            </div>
          </div>
          <div class="card-text">
            <h4>{{ song.title }}</h4>
            <p>{{ song.artist }}</p>
          </div>
        </div>
      </div>
    </section>

    <!-- RECIENTE -->
    <section class="content-section">
      <div class="section-header">
        <h3>{{ 'DASHBOARD.SECTION_RECENT' | translate }}</h3>
      </div>
      <div class="recent-list">
        <div class="recent-item" *ngFor="let i of [1,2,3]">
            <div class="mini-cover-placeholder">
              <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>
            </div>
            <div class="recent-info">
                <span>{{ 'DASHBOARD.RECENT_SESSION' | translate }} {{i}}</span>
                <small>{{ 'DASHBOARD.TIME_AGO' | translate }}</small>
            </div>
        </div>
      </div>
    </section>

  </main>

  <!-- REPRODUCTOR -->
  <footer class="player-bar" *ngIf="currentSong">
    <div class="player-track">
      <img [src]="currentSong.cover" class="track-cover">
      <div class="track-info">
        <div class="track-title">{{ currentSong.title }}</div>
        <div class="track-artist">{{ currentSong.artist }}</div>
      </div>
    </div>

    <div class="player-controls-container">
      <div class="controls-buttons">
        <button class="ctrl-btn shuffle"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg></button>
        
        <button class="ctrl-btn prev"><svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor" stroke="none"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5" stroke="currentColor" stroke-width="2"></line></svg></button>
        
        <button class="ctrl-btn play-pause">
          <svg *ngIf="!isPlaying" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
          <svg *ngIf="isPlaying" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" stroke="none"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
        </button>
        
        <button class="ctrl-btn next"><svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor" stroke="none"><polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19" stroke="currentColor" stroke-width="2"></line></svg></button>
        
        <button class="ctrl-btn repeat"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path></svg></button>
      </div>
      <div class="playback-bar">
        <span class="time current">0:42</span>
        <div class="progress-track">
          <div class="progress-fill" style="width: 30%;"></div>
        </div>
        <span class="time total">3:15</span>
      </div>
    </div>

    <div class="player-volume">
      <svg class="vol-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
      <div class="vol-track">
        <div class="vol-fill" style="width: 70%;"></div>
      </div>
    </div>
  </footer>

</div>